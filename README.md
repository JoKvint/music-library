# music-library

Описание
Music Library API — это REST API для управления онлайн-библиотекой песен. В библиотеке можно добавлять, обновлять, удалять и просматривать песни с возможностью фильтрации и пагинации. При добавлении песни API запрашивает внешнее API для получения дополнительной информации о песне, включая текст, дату релиза и ссылку на песню.

Технологии
Go (Gin, GORM)
PostgreSQL
Swagger для документации API
Docker (опционально)
.env для конфигурации
Логирование через стандартный log-пакет
Функциональность:
Получение списка песен: Фильтрация по группе и названию.
Добавление новой песни: С дополнительным запросом на внешний API для получения деталей песни.
Изменение данных песни: По ID.
Удаление песни: По ID.
Пагинация текстов песен: Тексты песен можно получать постранично.
Swagger-документация: Автоматически генерируется на основе комментариев в коде.
Структура проекта:

/music-library
├── main.go                 # Точка входа в приложение
├── config.go               # Загрузка конфигурации из .env
├── handlers.go             # Обработчики API
├── database.go             # Подключение к базе данных
├── models.go               # Модели данных
├── migrations              # SQL миграции
│   └── 001_create_songs_table.sql
├── swagger                 # Swagger документация
│   └── swagger.json
├── go.mod                  # Управление зависимостями Go
├── go.sum
└── .env                    # Конфигурационные данные
Установка и настройка:
Требования
Go 1.18+
PostgreSQL
Docker (опционально)

1. Настройка проекта
Склонируйте репозиторий:

git clone https://github.com/JoKvint/music-library
cd music-library

2. Создайте файл .env с необходимыми переменными окружения:

DB_HOST=localhost
DB_USER=yourusername
DB_PASSWORD=yourpassword
DB_NAME=music_library
DB_PORT=5432
PORT=8080

3. Установите зависимости:
go mod tidy

4. Настройте базу данных:
Создайте базу данных PostgreSQL, указав название в .env. Далее выполните миграции для создания необходимых таблиц:

psql -U yourusername -d music_library -f migrations/001_create_songs_table.sql

5. Запустите проект:
go run main.go
Приложение должно запуститься на порту 8080 (если не указан другой порт в .env).

Запуск через Docker
Вы можете использовать Docker для запуска проекта:

1.Создайте файл docker-compose.yml (если требуется).
2.Запустите контейнеры:

docker-compose up --build

API Документация
После запуска приложения Swagger-документация будет доступна по следующему адресу:

http://localhost:8080/swagger/index.html

Примеры API-запросов

-Получение всех песен с фильтрацией по группе и названию:
GET /songs?group=Muse&song=Supermassive Black Hole

-Добавление новой песни:
POST /songs
Content-Type: application/json

{
  "group": "Muse",
  "song": "Supermassive Black Hole"
}

-Получение песни по ID:
GET /songs/1

-Обновление песни:
PUT /songs/1
Content-Type: application/json

{
  "group": "Muse",
  "song": "Hysteria",
  "releaseDate": "23.03.2003",
  "text": "It's bugging me, grating me...",
  "link": "https://example.com"
}

-Удаление песни:
DELETE /songs/1

Логирование
В проекте используется базовое логирование для отслеживания ошибок и запросов к базе данных. Все критические ошибки, такие как проблемы с внешними API или базой данных, будут залогированы.

Вклад
Pull requests и предложения приветствуются! Если у вас есть вопросы или улучшения, создайте issue.